!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){return{x:t,y:e}},o=r,u=(r.Add=function(t,e){var n=t.x,r=t.y,u=e.x,i=e.y;return o(n+u,r+i)},r.Subtract=function(t,e){var n=t.x,r=t.y,u=e.x,i=e.y;return o(n-u,r-i)}),i=r.Scale=function(t,e,n){var r=t.x,u=t.y;return o(r*e,void 0===n?u*e:u*n)},a=(r.Dot=function(t,e){var n=t.x,r=t.y;return n*e.x+r*e.y},r.FromAngle=function(t){return o(Math.cos(t),Math.sin(t))},r.Angle=function(t){var e=t.x,n=t.y;return Math.atan2(n,e)},r.SqrMag=function(t){var e=t.x,n=t.y;return e*e+n*n}),l=r.Mag=function(t){return Math.sqrt(a(t))};r.SqrDist=function(t,e){return a(u(t,e))},r.Dist=function(t,e){return l(u(t,e))},r.Normalize=function(t){return i(t,1/l(t))},r.Copy=function(t){var e=t.x,n=t.y;return o(e,n)};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hslToRgb=function(t,e,n){var r,o,u;if(0==e)r=o=u=n;else{var i=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=i(l,a,t+1/3),o=i(l,a,t),u=i(l,a,t-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*u)]};e.pipe=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce(function(t,e){return e(t)},t)}},e.property=function(t){return function(e){return e[t]}},e.curry=function(t){var e=[];return function n(r){return e.push(r),e.length<t.length?n:t.apply(void 0,e)}},e.rgb=function(t,e,n){return"rgb("+t+","+e+","+n+")"},e.hsl=function(t,e,n){return"hsl("+t+","+e+"%,"+n+"%)"};var r=e.clamp=function(t,e){return function(n){return Math.min(Math.max(n,t),e)}};e.clamp01=r(0,1)},function(t,e,n){"use strict";var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,u=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,u=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw u}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=f(n(0)),u=f(n(3)),i=f(n(4)),a=n(1),l=f(n(5));function f(t){return t&&t.__esModule?t:{default:t}}var c=1280,s=720,d=15,h=3,v=10,y=.015,p=.5,m=100,g=document.getElementById("canvas"),b=g.getContext("2d");g.width=c,g.height=s;var x=[],M=[],w=document.getElementById("resolution"),_=document.getElementById("add-point"),P=document.getElementById("remove-point");function A(t){var e=u.default.Range(1,3)*(t%2==0?1:-1),n=u.default.Position(0,c,0,s),r=(0,i.default)(n,e);x.push(r);var f=new l.default(e>0?"+":"-",n.x,n.y,Math.abs(e)*h+d,e>0?(0,a.hsl)(120,100,75):(0,a.hsl)(0,100,75),c,s),v=t;f.on("move",function(e){e.rapid;var n=e.x,r=e.y;x[t]=(0,i.default)((0,o.default)(n,r),x[v].charge,x[v].v),O()}),M.push(f)}function O(){b.clearRect(0,0,c,s),b.fillStyle="rgb(0, 0, 0)",b.fillRect(0,0,c,s);for(var t=0,e=new Uint8ClampedArray(c*s*4),n=0;n<s;n+=v){for(var u=function(u){var l=(0,o.default)(0,0),f=(0,o.default)(u,n);x.forEach(function(t){l=o.default.Add(l,i.default.Field(f,t))});var s=o.default.Angle(l),d=s<0?2*Math.PI+s:s,h=(Math.floor(d/Math.PI*180)+180)%360,g=o.default.Mag(l),b=Math.pow(g,p)*y;b=Math.floor(b/(100/m))*(100/m);for(var M=(0,a.hslToRgb)(h/360,1,b/100),w=r(M,3),_=w[0],P=w[1],A=w[2],O=0;O<v;O++)for(var S=0;S<v;S++){var j=4*(O*c+S);e[t+j]=_,e[t+j+1]=P,e[t+j+2]=A,e[t+j+3]=255}t+=4*v},l=0;l<c;l+=v)u(l);t+=v*c*4-4*c}var f=new ImageData(e,c,s);b.putImageData(f,0,0)}Date.now();function S(){Date.now();Date.now(),requestAnimationFrame(S)}window.onload=function(){setTimeout(function(){!function(){for(var t=0;t<4;t++)A(t);w.addEventListener("change",function(){var t=w.value,e=parseInt(t);v=e,O()}),_.addEventListener("click",function(){A(x.length),O()}),P.addEventListener("click",function(){var t=x.length-1;t<0||(x.pop(),M[t].Destroy(),M.pop(),O())}),O()}(),S()},1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(0));var o=function(t,e){return void 0===e?Math.random()*t:Math.random()*(e-t)+t};e.default={Range:o,Position:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;return(0,r.default)(o(t,e),o(n,u))},Direction:function(){return r.default.FromAngle(o(0,2*Math.PI))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(0));var o=function(t,e){return{p:t,v:arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,r.default)(0,0),charge:e}},u=o,i=o.k=899e7,a=(o.e0=8.85e-12,o.FieldMag=function(t,e){var n=e.p,o=e.charge;return i*o/r.default.SqrDist(n,t)}),l=o.Field=function(t,e){return r.default.Scale(r.default.Normalize(r.default.Subtract(e.p,t)),a(t,e))};o.Force=function(t,e){var n=e.p,r=e.charge;return l(n,t)*r},o.ApplyForce=function(t){return function(e){return function(n){var o=n.p,i=n.charge,a=n.v;return u(o,i,r.default.Add(a,r.default.Scale(e,t)))}}},o.Update=function(t){return function(e){var n=e.p,o=e.charge,i=e.v;return u(r.default.Add(n,r.default.Scale(i,t)),o,i)}};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,u=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,u=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw u}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),i=function(t){return t&&t.__esModule?t:{default:t}}(n(6));function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var l=[];window.addEventListener("mousemove",function(t){t.preventDefault(),l.forEach(function(e){return e.onMove.bind(e)(t)})}),window.addEventListener("mouseup",function(t){t.preventDefault(),l.forEach(function(e){return e.onStop.bind(e)(t)})});var f=function(t){function e(t,n,r,o,u,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var f=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return f.handleHolder=document.getElementById("handles"),f.symbol=t,f.x=n,f.y=r,f.size,f.width=i,f.height=a,f.mx=0,f.my=0,f.moving=!1,f.el=document.createElement("div"),f.el.style.setProperty("--symbol","'"+t+"'"),f.el.style.setProperty("--size",o+"px"),f.el.style.backgroundColor=u,f.el.classList="handle",f.renderPosition(),f.el.addEventListener("mousedown",f.onStart.bind(f)),f.handleHolder.appendChild(f.el),l.push(f),f}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),o(e,[{key:"onStart",value:function(){this.mx=this.x,this.my=this.y,this.moving=!0}},{key:"onMove",value:function(t){if(this.moving){var e=this.screenToCanvas(t.pageX,t.pageY),n=r(e,2),o=n[0],u=n[1];this.mx=o,this.my=u,this.updatePosition()}}},{key:"onStop",value:function(){this.moving=!1,this.dispatch("move",{rapid:!1,x:this.x,y:this.y})}},{key:"screenToCanvas",value:function(t,e){return[t-this.handleHolder.offsetLeft,e-this.handleHolder.offsetTop]}},{key:"updatePosition",value:function(){var t=(0,u.clamp)(0,this.width)(this.mx),e=(0,u.clamp)(0,this.height)(this.my),n=t!=this.x||e!=this.y;this.x=t,this.y=e,n&&this.renderPosition()}},{key:"renderPosition",value:function(){this.el.style.setProperty("--x",this.x+"px"),this.el.style.setProperty("--y",this.y+"px"),this.dispatch("move",{rapid:!0,x:this.x,y:this.y})}},{key:"Destroy",value:function(){var t=this;this.el.remove();var e=l.findIndex(function(e){return e==t});-1!=e&&(e==l.length&&l.pop(),l=[].concat(a(l.slice(0,e)),a(l.slice(e+1))))}}]),e}();e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handlers=new Map}return r(t,[{key:"on",value:function(t,e){this.handlers.has(t)||this.handlers.set(t,[]),this.handlers.set(t,[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(this.handlers.get(t)),[e]))}},{key:"dispatch",value:function(t,e){this.handlers.has(t)&&this.handlers.get(t).forEach(function(t){return t(e)})}}]),t}();e.default=o}]);